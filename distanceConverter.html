<!DOCTYPE html>
<html>
	<body>
		<div id="root"></div>
	</body>
	<script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
	<script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
	<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
	<script type="text/babel">

		function Button({ onClickFunc, text, color }) {
			return (
				<button onClick={onClickFunc} 
								style={{ width: '25%', color: 'white', backgroundColor: color, borderRadius: 10, borderWidth: 0 }}>
				{text}</button>
			);
		}

		function DistanceConverter() {
			const [inverted, setInverted] = React.useState(false);
			const [kilo, setKilo] = React.useState(0);
			const [mile, setMile] = React.useState(0);
			const kiloInputRef = React.useRef();
			const mileInputRef = React.useRef();

			React.useEffect(() => {
				kiloInputRef.current.focus();
			}, [])

			React.useEffect(() => {
				if (!invert)
					kiloInputRef.current.focus();
				else
					mileInputRef.current.focus();
			}, [inverted])

			const handleOnChangeKilo = (e) => {
				const target = e.target.value;

				if (target < 0)
					return ;
				setKilo(target);
				setMile((target) * 0.62.toFixed(2))
			}

			const handleOnChangeMile = (e) => {
				const target = e.target.value;

				if (target < 0)
					return ;
				setMile(target);
				setKilo((target / 0.62).toFixed(2));
			}

			const reset = () => {
				setKilo(0);
				setMile(0);
			}

			const invert = () => {
				setInverted(!inverted);
				reset();
			}

			return (
				<div style={{ display: 'flex', flexDirection: 'column',  alignItems: 'center' }}>
					<h3>킬로미터/마일 변환기</h3>
					<div>
						<label htmlFor="kilo">킬로미터: </label>
						<input 
							id="kilo"
							placeholder="Kilometers" 
							ref={kiloInputRef}
							type="number"
							value={kilo}
							onChange={(e)=>handleOnChangeKilo(e)}
							disabled={inverted ? true : false}
						/>
					</div>
					<div>
						<label htmlFor="mile">마일: </label>
						<input 
							id="mile"
							placeholder="Mile"
							ref={mileInputRef}
							type="number"
							value={mile}
							onChange={(e)=>handleOnChangeMile(e)}
							disabled={!inverted ? true : false}
						/>
					</div>
					<br />
					<div style={{ display: 'flex', flexDirection: 'row', width: '50%', justifyContent: 'center'}}>
						<Button onClickFunc={reset} text="리셋" color="tomato" />
						<Button onClickFunc={invert} text={inverted ? "마일=>킬로미터" : "킬로미터=>마일"} color="skyBlue" />
					</div>
				</div>
			);
		}
		ReactDOM.render(<DistanceConverter />, root);
	</script>
</html>