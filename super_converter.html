<!DOCTYPE html>
<html>

<body>
	<div id="root"></div>
</body>
<script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="text/babel">
	function App() {
		const [inverted, setInverted] = React.useState(false);
		const [timeOrDistance, setTOD] = React.useState(1);
		const [min, setMin] = React.useState(0);
		const [hour, setHour] = React.useState(0);
		const [kilo, setKilo] = React.useState(0);
		const [mile, setMile] = React.useState(0);
		const [buttonTitle, setBT] = React.useState("시=>분");

		const handleTOD = (e) => {
			setTOD(e.target.value);
			console.log(timeOrDistance);
			setMin(0);
			setHour(0);
			setKilo(0);
			setMile(0);
			setInverted(false);
			if(timeOrDistance != 1){
				setBT("시=>분");
			}
			else{
				setBT("마일=>킬로미터");
			}
		}


		function MinHourConverter() {
			const handleMinChange = (e) => {
				setMin(e.target.value);
				setHour(Math.round(e.target.value / 60));
			}

			const handleHourChange = (e) => {
				setHour(e.target.value);
				setMin(e.target.value * 60);
			}
			return (<>
				<div>
					<label>분: </label>
					<input value={min} disabled={!(inverted) ? "" : "disabled"} type="number" onChange={handleMinChange} />
				</div>
				<div>
					<label>시: </label>
					<input value={hour} disabled={(inverted) ? "" : "disabled"} type="number" onChange={handleHourChange} />
				</div>
				<br />

			</>

			)
		}

		function KiloMileConverter() {
			const handleKiloChange = (e) => {
				setKilo(e.target.value);
				setMile(e.target.value * 0.62);
			}

			const handleMileChange = (e) => {
				setMile(e.target.value);
				setKilo(e.target.value * 1.60);
			}
			return (<>
				<div>
					<label>킬로미터: </label>
					<input value={kilo} disabled={!(inverted) ? "" : "disabled"} type="number" onChange={handleKiloChange} />
				</div>
				<div>
					<label>마일: </label>
					<input value={mile} disabled={(inverted) ? "" : "disabled"} type="number" onChange={handleMileChange} />
				</div>
				<br />
			</>

			)
		}

		function Buttons() {
			const reset = () => {
				setMin(0);
				setHour(0);
				setKilo(0);
				setMile(0);
			}

			const converting = () => {
				if (inverted == false) {
					if (timeOrDistance == 1){
					setBT("분=>시");
					setInverted(true);}
					else{
						setBT("킬로미터=>마일");
						setInverted(true);
					}
				}
				else {
					if (timeOrDistance == 1){
					setBT("시=>분");
					setInverted(false);}
					else{
						setBT("마일=>킬로미터");
						setInverted(false);
					}
				}
				reset();
				
			}

			return (<>
				<div>
					<button style={{backgroundColor:'red', borderRadius:5, color:'white'}} onClick={reset}>리셋</button>
					<button style={{backgroundColor:'skyblue', borderRadius:5, color:'white'}} onClick={converting}>{buttonTitle}</button>
				</div>
			</>
			)
		}


		return (
			<div>
				<h1>변환기</h1>
				<select onChange={handleTOD}>
					<option value="1">분/시 변환기</option>
					<option value="2">킬로미터/마일 변환기</option>
				</select>
				<hr />
				{timeOrDistance == 1 ? MinHourConverter() : KiloMileConverter()}
				<Buttons />
			</div>
		);
	}
	ReactDOM.render(<App />, root);
</script>

</html>